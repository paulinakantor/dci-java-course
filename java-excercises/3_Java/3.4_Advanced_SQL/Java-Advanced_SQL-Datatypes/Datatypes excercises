Data types excercises

1. Enum data type usage
Time: ~ 15 min
Level of Difficulty: low


Create enum that will contain statuses 'NEW', "PAID", "WAITING FOR PAYMENT".
Create table "Invoices" with columns: buyer, seller, value, account number, status. Chose the right column types.
Insert a few rows into this table with different statuses.
Select only those invoices with status = "NEW"

Solution:

CREATE TYPE invoice_status as enum ('NEW', 'WAITING_FOR_PAYMENT', 'PAID');

CREATE TABLE invoices (
   id serial,
   buyer text,
   seller text,
   status invoice_status,
   value numeric,
   account_number int);

INSERT INTO invoices (buyer, seller, status, value, account_number)
VALUES ('company a', 'company b', 'NEW', 23.43, 123321123), ('company a', 'company b', 'WAITING_FOR_PAYMENT', 23.43, 123321123);


select * from invoices where status = 'NEW';


2. UUID data type usage
Time: ~ 15 min
Level of Difficulty: low


Modify table "Invoices" - add column that will keep "internal_id". 
Update each row with a value in a column "internal_id". You can use this generator: https://www.uuidgenerator.net/

Solution:

alter table invoices add column internal_id uuid;

update invoices set internal_id = '5f46ac3e-dad0-47d7-9314-3b449db25ceb' where id = ...



2. JSON data type usage
Time: ~ 15 min
Level of Difficulty: low

Modify table "Invoices" - add 2 columns that will keep json view of an entity. One column should be with type json and other with type jsonb.
Try to fill newly created columns with below json:

'{
  "buyer": "company a",
  "seller": "company b",
  "status": "NEW",
  "account_number": 123321123
  "value": 23.43
}

Fix the error.


Solution:


alter table invoices add column json_view json;

alter table invoices add column json_view_parsed jsonb;

insert into invoices  (buyer, seller, status, value, account_number, json_view, json_view_parsed) 
values ('company a', 'company b', 'NEW', 23.43, 123321123,
'{
  "buyer": "company a",
  "seller": "company b",
  "status": "NEW",
  "account_number": 123321123
  "value": 23.43
}',
'{
  "buyer": "company a",
  "seller": "company b",
  "status": "NEW",
  "account_number": 123321123
  "value": 23.43
}'
);


2. Arrays data type usage
Time: ~ 15 min
Level of Difficulty: low





